(function(s){s.plot.plugins.push({init:function(s){s.hooks.processDatapoints.push(function(b,l,t){if(!(null==l.stack||!1===l.stack)){var j;b=b.getData();for(var f=null,h=0;h<b.length&&l!=b[h];++h)b[h].stack==l.stack&&(f=b[h]);if(j=f){b=t.pointsize;f=t.points;h=j.datapoints.pointsize;j=j.datapoints.points;var c=[],p,a,q,k,n,r,u=l.lines.show;k=l.bars.horizontal;var s=2<b&&(k?t.format[2].x:t.format[2].y);l=u&&l.lines.steps;q=!0;for(var v=k?1:0,m=k?0:1,d=0,g=0,e;!(d>=f.length);){e=c.length;if(null==f[d]){for(a=
0;a<b;++a)c.push(f[d+a]);d+=b}else if(g>=j.length){if(!u)for(a=0;a<b;++a)c.push(f[d+a]);d+=b}else if(null==j[g]){for(a=0;a<b;++a)c.push(null);q=!0;g+=h}else{p=f[d+v];a=f[d+m];k=j[g+v];n=j[g+m];r=0;if(p==k){for(a=0;a<b;++a)c.push(f[d+a]);c[e+m]+=n;r=n;d+=b;g+=h}else if(p>k){if(u&&0<d&&null!=f[d-b]){q=a+(f[d-b+m]-a)*(k-p)/(f[d-b+v]-p);c.push(k);c.push(q+n);for(a=2;a<b;++a)c.push(f[d+a]);r=n}g+=h}else{if(q&&u){d+=b;continue}for(a=0;a<b;++a)c.push(f[d+a]);u&&(0<g&&null!=j[g-h])&&(r=n+(j[g-h+m]-n)*(p-
k)/(j[g-h+v]-k));c[e+m]+=r;d+=b}q=!1;e!=c.length&&s&&(c[e+2]+=r)}if(l&&e!=c.length&&0<e&&null!=c[e]&&c[e]!=c[e-b]&&c[e+1]!=c[e-b+1]){for(a=0;a<b;++a)c[e+b+a]=c[e+a];c[e+1]=c[e-b+1]}}t.points=c}}})},options:{series:{stack:null}},name:"stack",version:"1.2"})})(jQuery);
