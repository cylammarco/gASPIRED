(function(m){function p(){var a=document.createElement("div");return"undefined"!=typeof a.style.MozTransition||"undefined"!=typeof a.style.OTransition||"undefined"!=typeof a.style.webkitTransition||"undefined"!=typeof a.style.transition}function n(a,c,d,b,e){this.axisName=a;this.position=c;this.padding=d;this.plot=b;this.opts=e;this.height=this.width=0}function k(a,c,d,b,e){n.prototype.constructor.call(this,a,c,d,b,e)}function h(a,c,d,b,e){n.prototype.constructor.call(this,a,c,d,b,e);this.elem=null}
function f(a,c,d,b,e){h.prototype.constructor.call(this,a,c,d,b,e)}function l(a,c,d,b,e){f.prototype.constructor.call(this,a,c,d,b,e);this.requiresResize=!1}n.prototype.cleanup=function(){};k.prototype=new n;k.prototype.constructor=k;k.prototype.calculateSize=function(){this.opts.axisLabelFontSizePixels||(this.opts.axisLabelFontSizePixels=14);this.opts.axisLabelFontFamily||(this.opts.axisLabelFontFamily="sans-serif");"left"==this.position||"right"==this.position?(this.width=this.opts.axisLabelFontSizePixels+
this.padding,this.height=0):(this.width=0,this.height=this.opts.axisLabelFontSizePixels+this.padding)};k.prototype.draw=function(a){this.opts.axisLabelColour||(this.opts.axisLabelColour="black");var c=this.plot.getCanvas().getContext("2d");c.save();c.font=this.opts.axisLabelFontSizePixels+"px "+this.opts.axisLabelFontFamily;c.fillStyle=this.opts.axisLabelColour;var d=c.measureText(this.opts.axisLabel).width,b=this.opts.axisLabelFontSizePixels,e,f,h=0;"top"==this.position?(e=a.left+a.width/2-d/2,f=
a.top+0.72*b):"bottom"==this.position?(e=a.left+a.width/2-d/2,f=a.top+a.height-0.72*b):"left"==this.position?(e=a.left+0.72*b,f=a.height/2+a.top+d/2,h=-Math.PI/2):"right"==this.position&&(e=a.left+a.width-0.72*b,f=a.height/2+a.top-d/2,h=Math.PI/2);c.translate(e,f);c.rotate(h);c.fillText(this.opts.axisLabel,0,0);c.restore()};h.prototype=new n;h.prototype.constructor=h;h.prototype.calculateSize=function(){var a=m('<div class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(a);
this.labelWidth=a.outerWidth(!0);this.labelHeight=a.outerHeight(!0);a.remove();this.width=this.height=0;"left"==this.position||"right"==this.position?this.width=this.labelWidth+this.padding:this.height=this.labelHeight+this.padding};h.prototype.cleanup=function(){this.elem&&this.elem.remove()};h.prototype.draw=function(a){this.plot.getPlaceholder().find("#"+this.axisName+"Label").remove();this.elem=m('<div id="'+this.axisName+'Label" " class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+
"</div>");this.plot.getPlaceholder().append(this.elem);"top"==this.position?(this.elem.css("left",a.left+a.width/2-this.labelWidth/2+"px"),this.elem.css("top",a.top+"px")):"bottom"==this.position?(this.elem.css("left",a.left+a.width/2-this.labelWidth/2+"px"),this.elem.css("top",a.top+a.height-this.labelHeight+"px")):"left"==this.position?(this.elem.css("top",a.top+a.height/2-this.labelHeight/2+"px"),this.elem.css("left",a.left+"px")):"right"==this.position&&(this.elem.css("top",a.top+a.height/2-this.labelHeight/
2+"px"),this.elem.css("left",a.left+a.width-this.labelWidth+"px"))};f.prototype=new h;f.prototype.constructor=f;f.prototype.calculateSize=function(){h.prototype.calculateSize.call(this);this.width=this.height=0;"left"==this.position||"right"==this.position?this.width=this.labelHeight+this.padding:this.height=this.labelHeight+this.padding};f.prototype.transforms=function(a,c,d){var b={"-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""};if(0!=c||0!=d)c=" translate("+c+"px, "+
d+"px)",b["-moz-transform"]+=c,b["-webkit-transform"]+=c,b["-o-transform"]+=c,b["-ms-transform"]+=c;0!=a&&(a=" rotate("+a+"deg)",b["-moz-transform"]+=a,b["-webkit-transform"]+=a,b["-o-transform"]+=a,b["-ms-transform"]+=a);a="top: 0; left: 0; ";for(var e in b)b[e]&&(a+=e+":"+b[e]+";");return a+";"};f.prototype.calculateOffsets=function(a){var c={x:0,y:0,degrees:0};"bottom"==this.position?(c.x=a.left+a.width/2-this.labelWidth/2,c.y=a.top+a.height-this.labelHeight):"top"==this.position?(c.x=a.left+a.width/
2-this.labelWidth/2,c.y=a.top):"left"==this.position?(c.degrees=-90,c.x=a.left-this.labelWidth/2+this.labelHeight/2,c.y=a.height/2+a.top):"right"==this.position&&(c.degrees=90,c.x=a.left+a.width-this.labelWidth/2-this.labelHeight/2,c.y=a.height/2+a.top);c.x=Math.round(c.x);c.y=Math.round(c.y);return c};f.prototype.draw=function(a){this.plot.getPlaceholder().find("."+this.axisName+"Label").remove();a=this.calculateOffsets(a);this.elem=m('<div class="axisLabels '+this.axisName+'Label" style="position:absolute; '+
this.transforms(a.degrees,a.x,a.y)+'">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(this.elem)};l.prototype=new f;l.prototype.constructor=l;l.prototype.transforms=function(a,c,d){var b="";if(0!=a){for(a/=90;0>a;)a+=4;b+=" filter: progid:DXImageTransform.Microsoft.BasicImage(rotation="+a+"); ";this.requiresResize="right"==this.position}0!=c&&(b+="left: "+c+"px; ");0!=d&&(b+="top: "+d+"px; ");return b};l.prototype.calculateOffsets=function(a){var c=f.prototype.calculateOffsets.call(this,
a);"top"==this.position?c.y=a.top+1:"left"==this.position?(c.x=a.left,c.y=a.height/2+a.top-this.labelWidth/2):"right"==this.position&&(c.x=a.left+a.width-this.labelHeight,c.y=a.height/2+a.top-this.labelWidth/2);return c};l.prototype.draw=function(a){f.prototype.draw.call(this,a);this.requiresResize&&(this.elem=this.plot.getPlaceholder().find("."+this.axisName+"Label"),this.elem.css("width",this.labelWidth),this.elem.css("height",this.labelHeight))};m.plot.plugins.push({init:function(a){a.hooks.processOptions.push(function(a,
d){if(d.axisLabels.show){var b=!1,e={};a.hooks.draw.push(function(a){var c=!1;b?(b=!1,m.each(a.getAxes(),function(c,b){var d=b.options||a.getOptions()[c];d&&(d.axisLabel&&b.show)&&e[c].draw(b.box)})):(m.each(a.getAxes(),function(b,d){var g=d.options||a.getOptions()[b];b in e&&(d.labelHeight-=e[b].height,d.labelWidth-=e[b].width,g.labelHeight=d.labelHeight,g.labelWidth=d.labelWidth,e[b].cleanup(),delete e[b]);if(g&&g.axisLabel&&d.show){c=!0;var j=null;if(!g.axisLabelUseHtml&&"Microsoft Internet Explorer"==
navigator.appName)null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(rv=parseFloat(RegExp.$1)),j=9<=rv&&!g.axisLabelUseCanvas&&!g.axisLabelUseHtml?f:!g.axisLabelUseCanvas&&!g.axisLabelUseHtml?l:g.axisLabelUseCanvas?k:h;else{if(!(j=g.axisLabelUseHtml)){if(j=!p())j=document.createElement("canvas").getContext?"function"==typeof document.createElement("canvas").getContext("2d").fillText:!1,j=!j;j=j&&!g.axisLabelUseCanvas}j=j?h:g.axisLabelUseCanvas||!p()?k:f}e[b]=new j(b,d.position,void 0===
g.axisLabelPadding?2:g.axisLabelPadding,a,g);e[b].calculateSize();g.labelHeight=d.labelHeight+e[b].height;g.labelWidth=d.labelWidth+e[b].width}}),c&&(b=!0,a.setupGrid(),a.draw()))})}})},options:{axisLabels:{show:!0}},name:"axisLabels",version:"2.0"})})(jQuery);
