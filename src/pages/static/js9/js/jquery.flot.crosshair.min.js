(function(j){j.plot.plugins.push({init:function(a){function f(){!c.locked&&-1!=c.x&&(c.x=-1,a.triggerRedrawOverlay())}function h(d){if(!c.locked)if(a.getSelection&&a.getSelection())c.x=-1;else{var b=a.offset();c.x=Math.max(0,Math.min(d.pageX-b.left,a.width()));c.y=Math.max(0,Math.min(d.pageY-b.top,a.height()));a.triggerRedrawOverlay()}}var c={x:-1,y:-1,locked:!1};a.setCrosshair=function(d){d?(d=a.p2c(d),c.x=Math.max(0,Math.min(d.left,a.width())),c.y=Math.max(0,Math.min(d.top,a.height()))):c.x=-1;
a.triggerRedrawOverlay()};a.clearCrosshair=a.setCrosshair;a.lockCrosshair=function(d){d&&a.setCrosshair(d);c.locked=!0};a.unlockCrosshair=function(){c.locked=!1};a.hooks.bindEvents.push(function(a,b){a.getOptions().crosshair.mode&&(b.mouseout(f),b.mousemove(h))});a.hooks.drawOverlay.push(function(a,b){var e=a.getOptions().crosshair;if(e.mode){var g=a.getPlotOffset();b.save();b.translate(g.left,g.top);if(-1!=c.x){g=a.getOptions().crosshair.lineWidth%2?0.5:0;b.strokeStyle=e.color;b.lineWidth=e.lineWidth;
b.lineJoin="round";b.beginPath();if(-1!=e.mode.indexOf("x")){var f=Math.floor(c.x)+g;b.moveTo(f,0);b.lineTo(f,a.height())}-1!=e.mode.indexOf("y")&&(e=Math.floor(c.y)+g,b.moveTo(0,e),b.lineTo(a.width(),e));b.stroke()}b.restore()}});a.hooks.shutdown.push(function(a,b){b.unbind("mouseout",f);b.unbind("mousemove",h)})},options:{crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}},name:"crosshair",version:"1.0"})})(jQuery);
