<div>
<button type="button" class="btn btn-primary" onclick="loadFITS('./metrics_ocmip5.json')">Load Image</button>
<button type="button" class="btn btn-primary" onclick="pythonCall()">Test Python Script</button>
</div>

Order:
<select id="order">
  <option value="null" selected> ----- </option>
  <option value="sortinit_col_row">MinMax</option>
  <option value="sortinit_row">Zscale</option>
</select>

Palette:
<select id="palette">
  <option value="RdYlGn">RdYlGn</option>
  <option value="Spectral" selected>Spectral</option>
  <option value="RdYlBu">RdYlBu</option>
  <option value="RdGy">RdGy</option>
  <option value="RdBu">RdBu</option>
  <option value="PiYG">PiYG</option>
  <option value="PRGn">PRGn</option>
  <option value="BrBG">BrBG</option>
  <option value="PuOr">PuOr</option>
</select>

<div id="heatmap"></div>

<script type="text/javascript">
  const colorbrewer = require('colorbrewer');
  const path = require('path')
  const spawn = require("child_process").spawn;

  function loadFITS(input) {
      console.log(typeof input);
    if (typeof input === 'string') {
      console.log(input);
      d3.json(input).then( function(data) {
        heatmap_display(data, "#heatmap", "Spectral");
      })
    } else if (typeof input === 'object') {
      heatmap_display(input, "#heatmap", "Spectral");
    }
  }
    
  function pythonCall() {

    const pythonProcess = spawn('python3', [path.join(__dirname, '/testing.py')])
    var result = '';

    pythonProcess.stdout.on('data', (data) => {
    // Do something with the data returned from python script
      result += data.toString();
      //console.log(data);
    });

    pythonProcess.stdout.on('close', (data) => {
      try {
        // If JSON handle the data
        console.log(JSON.parse(result));
        heatmap_display(JSON.parse(result), "#heatmap", "Spectral");
      } catch (e) {
        // Otherwise treat as a log entry
        console.log(e);
      }
    });
  }
</script>
